# Load with OmegaConf

# Other configuration files to merge with this file via OmegaConf 
conf-dependencies:
  - ./use-cases/mnist/datasets-registry.yml

steps:
  - preprocessing:
      input: null
      output: ${datasets.preproc-images.location}
      command: python ./use-cases/mnist/mnist-preproc.py
      env: 
        file: ./use-cases/mnist/preproc-env.yml
        prefix: ./use-cases/mnist/.venv-preproc
        source: null
      config: null
  - ml-inference:
      input: ${datasets.preproc-images.location}
      output: ${datasets.ml-predictions.location}
      command: itwinai predict
      env: 
        file: ./ai/pytorch-env.yml
        prefix: ./ai/.venv-pytorch
        source: ./ai
      config: ./use-cases/mnist/mnist-ai.yml
